/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package library;

import java.sql.*;
import java.text.ParseException;
import java.util.*;
import java.util.Date;
import java.util.Calendar;
import java.text.SimpleDateFormat;

import java.util.logging.Level;
import java.util.logging.Logger;
import static library.Login.uid;   // This is important line to be able to use the public static variable uid in this form

import net.proteanit.sql.DbUtils;  // This to use jtable set model. For this to work I need rs2xml.jar file to be added to project libraries RightClick --> Add JAR/folder
import javax.swing.*;
import javax.swing.table.*;

/**
 *
 * @author HanaKod
 */
public class Members extends javax.swing.JFrame {

    /**
     * Creates new form Members
     */
    public Members() {
    initComponents();
    //to centralize the form on screen
    this.setLocationRelativeTo(null);
        
    }
    
    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        panel = new javax.swing.JTabbedPane();
        profile = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        ChangePwd = new javax.swing.JLabel();
        UserName = new javax.swing.JTextField();
        fullName = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        localAdd = new javax.swing.JTextArea();
        Email = new javax.swing.JTextField();
        phoneNo = new javax.swing.JTextField();
        editUName = new javax.swing.JLabel();
        saveUName = new javax.swing.JLabel();
        editFullName = new javax.swing.JLabel();
        saveFullName = new javax.swing.JLabel();
        editPhone = new javax.swing.JLabel();
        savePhone = new javax.swing.JLabel();
        editEmail = new javax.swing.JLabel();
        saveEmail = new javax.swing.JLabel();
        welcome = new javax.swing.JLabel();
        editAdd = new javax.swing.JLabel();
        saveAdd = new javax.swing.JLabel();
        bookSearch = new javax.swing.JPanel();
        jLabel7 = new javax.swing.JLabel();
        bookName = new javax.swing.JTextField();
        catigory = new javax.swing.JComboBox<>();
        bSearch = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        bookTable = new javax.swing.JTable();
        borrowBooks = new javax.swing.JButton();
        Renew = new javax.swing.JPanel();
        Expire = new javax.swing.JLabel();
        renewMembership = new javax.swing.JButton();
        close = new javax.swing.JLabel();
        Mini = new javax.swing.JLabel();
        logOut = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(0, 153, 255));
        setUndecorated(true);
        setResizable(false);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        jPanel1.setBackground(new java.awt.Color(0, 153, 255));

        jLabel1.setFont(new java.awt.Font("Calibri", 1, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Pic/Lib.png"))); // NOI18N
        jLabel1.setText("UM LIBRARY");
        jLabel1.setToolTipText("");

        panel.setBackground(new java.awt.Color(0, 153, 255));

        profile.setBackground(new java.awt.Color(255, 255, 255));
        profile.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        profile.setInheritsPopupMenu(true);

        jLabel2.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel2.setText("Full name");
        jLabel2.setToolTipText("");

        jLabel3.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel3.setText("User name");
        jLabel3.setToolTipText("");

        jLabel4.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel4.setText("Local address");
        jLabel4.setToolTipText("");

        jLabel5.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel5.setText("Phone number");
        jLabel5.setToolTipText("");

        jLabel6.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel6.setText("E-mail address");
        jLabel6.setToolTipText("");

        ChangePwd.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        ChangePwd.setForeground(new java.awt.Color(0, 51, 255));
        ChangePwd.setText("Change password");
        ChangePwd.setToolTipText("");
        ChangePwd.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        ChangePwd.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                ChangePwdMouseClicked(evt);
            }
        });

        UserName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        UserName.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        UserName.setEnabled(false);

        fullName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        fullName.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        fullName.setEnabled(false);

        localAdd.setEditable(false);
        localAdd.setColumns(20);
        localAdd.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        localAdd.setLineWrap(true);
        localAdd.setRows(5);
        localAdd.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        jScrollPane1.setViewportView(localAdd);

        Email.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        Email.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        Email.setEnabled(false);

        phoneNo.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        phoneNo.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        phoneNo.setEnabled(false);

        editUName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        editUName.setForeground(new java.awt.Color(51, 51, 255));
        editUName.setText("Edit");
        editUName.setToolTipText("");
        editUName.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        editUName.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                editUNameMouseClicked(evt);
            }
        });

        saveUName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        saveUName.setForeground(new java.awt.Color(51, 51, 255));
        saveUName.setText("Save");
        saveUName.setToolTipText("");
        saveUName.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        saveUName.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                saveUNameMouseClicked(evt);
            }
        });

        editFullName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        editFullName.setForeground(new java.awt.Color(51, 51, 255));
        editFullName.setText("Edit");
        editFullName.setToolTipText("");
        editFullName.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        editFullName.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                editFullNameMouseClicked(evt);
            }
        });

        saveFullName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        saveFullName.setForeground(new java.awt.Color(51, 51, 255));
        saveFullName.setText("Save");
        saveFullName.setToolTipText("");
        saveFullName.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        saveFullName.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                saveFullNameMouseClicked(evt);
            }
        });

        editPhone.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        editPhone.setForeground(new java.awt.Color(51, 51, 255));
        editPhone.setText("Edit");
        editPhone.setToolTipText("");
        editPhone.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        editPhone.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                editPhoneMouseClicked(evt);
            }
        });

        savePhone.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        savePhone.setForeground(new java.awt.Color(51, 51, 255));
        savePhone.setText("Save");
        savePhone.setToolTipText("");
        savePhone.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        savePhone.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                savePhoneMouseClicked(evt);
            }
        });

        editEmail.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        editEmail.setForeground(new java.awt.Color(51, 51, 255));
        editEmail.setText("Edit");
        editEmail.setToolTipText("");
        editEmail.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        editEmail.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                editEmailMouseClicked(evt);
            }
        });

        saveEmail.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        saveEmail.setForeground(new java.awt.Color(51, 51, 255));
        saveEmail.setText("Save");
        saveEmail.setToolTipText("");
        saveEmail.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        saveEmail.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                saveEmailMouseClicked(evt);
            }
        });

        welcome.setBackground(new java.awt.Color(255, 255, 255));
        welcome.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        welcome.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        welcome.setText("Welcome");

        editAdd.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        editAdd.setForeground(new java.awt.Color(51, 51, 255));
        editAdd.setText("Edit");
        editAdd.setToolTipText("");
        editAdd.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        editAdd.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                editAddMouseClicked(evt);
            }
        });

        saveAdd.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        saveAdd.setForeground(new java.awt.Color(51, 51, 255));
        saveAdd.setText("Save");
        saveAdd.setToolTipText("");
        saveAdd.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        saveAdd.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                saveAddMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout profileLayout = new javax.swing.GroupLayout(profile);
        profile.setLayout(profileLayout);
        profileLayout.setHorizontalGroup(
            profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(profileLayout.createSequentialGroup()
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(23, 23, 23)
                        .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(30, 30, 30)
                        .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(profileLayout.createSequentialGroup()
                                .addComponent(UserName, javax.swing.GroupLayout.PREFERRED_SIZE, 288, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(editUName, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(saveUName, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(profileLayout.createSequentialGroup()
                                .addComponent(Email, javax.swing.GroupLayout.PREFERRED_SIZE, 288, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(editEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(saveEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(profileLayout.createSequentialGroup()
                                .addComponent(fullName, javax.swing.GroupLayout.PREFERRED_SIZE, 288, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(editFullName, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(saveFullName, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(profileLayout.createSequentialGroup()
                                .addComponent(phoneNo, javax.swing.GroupLayout.PREFERRED_SIZE, 288, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(editPhone, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(savePhone, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(profileLayout.createSequentialGroup()
                                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 288, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(profileLayout.createSequentialGroup()
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(editAdd, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(saveAdd, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addGroup(profileLayout.createSequentialGroup()
                                        .addGap(166, 166, 166)
                                        .addComponent(welcome, javax.swing.GroupLayout.PREFERRED_SIZE, 184, javax.swing.GroupLayout.PREFERRED_SIZE))))))
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(237, 237, 237)
                        .addComponent(ChangePwd, javax.swing.GroupLayout.PREFERRED_SIZE, 141, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(88, 170, Short.MAX_VALUE))
        );
        profileLayout.setVerticalGroup(
            profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(profileLayout.createSequentialGroup()
                .addGap(20, 20, 20)
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(2, 2, 2)
                        .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(UserName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(editUName, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(saveUName, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(25, 25, 25)
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(fullName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editFullName, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(saveFullName, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(53, 53, 53)
                        .addComponent(jLabel4, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(68, 68, 68)
                        .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(editAdd)
                            .addComponent(saveAdd, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(profileLayout.createSequentialGroup()
                        .addGap(18, 18, 18)
                        .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(welcome, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 172, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 60, Short.MAX_VALUE)
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(phoneNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editPhone, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(savePhone, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(36, 36, 36)
                .addGroup(profileLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(Email, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(saveEmail, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(37, 37, 37)
                .addComponent(ChangePwd, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(104, 104, 104))
        );

        panel.addTab("User Profile", null, profile, "");

        bookSearch.setBackground(new java.awt.Color(255, 255, 255));
        bookSearch.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N

        jLabel7.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        jLabel7.setText("Book name");

        bookName.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N

        catigory.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        catigory.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Select catigory" }));

        bSearch.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        bSearch.setText("Search");
        bSearch.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bSearchMouseClicked(evt);
            }
        });

        bookTable.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        bookTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null},
                {null, null, null}
            },
            new String [] {
                "Title1", "Title2", "Title3"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                true, false, true
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        bookTable.setColumnSelectionAllowed(true);
        bookTable.setGridColor(new java.awt.Color(102, 102, 102));
        bookTable.setRowHeight(30);
        bookTable.setSelectionBackground(new java.awt.Color(153, 204, 255));
        bookTable.setSelectionForeground(new java.awt.Color(51, 51, 51));
        bookTable.getTableHeader().setReorderingAllowed(false);
        bookTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                bookTableMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(bookTable);
        bookTable.getColumnModel().getSelectionModel().setSelectionMode(javax.swing.ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

        borrowBooks.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        borrowBooks.setText("Borrow selected books");
        borrowBooks.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                borrowBooksMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout bookSearchLayout = new javax.swing.GroupLayout(bookSearch);
        bookSearch.setLayout(bookSearchLayout);
        bookSearchLayout.setHorizontalGroup(
            bookSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, bookSearchLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(borrowBooks, javax.swing.GroupLayout.PREFERRED_SIZE, 236, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(369, 369, 369))
            .addGroup(bookSearchLayout.createSequentialGroup()
                .addGroup(bookSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(bookSearchLayout.createSequentialGroup()
                        .addGap(54, 54, 54)
                        .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 105, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(bookName, javax.swing.GroupLayout.PREFERRED_SIZE, 302, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(41, 41, 41)
                        .addComponent(catigory, javax.swing.GroupLayout.PREFERRED_SIZE, 163, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(52, 52, 52)
                        .addComponent(bSearch))
                    .addGroup(bookSearchLayout.createSequentialGroup()
                        .addGap(73, 73, 73)
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 815, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(87, Short.MAX_VALUE))
        );
        bookSearchLayout.setVerticalGroup(
            bookSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(bookSearchLayout.createSequentialGroup()
                .addGap(40, 40, 40)
                .addGroup(bookSearchLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7)
                    .addComponent(bookName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(catigory, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bSearch))
                .addGap(35, 35, 35)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 331, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(borrowBooks)
                .addContainerGap(126, Short.MAX_VALUE))
        );

        panel.addTab("Book Search", bookSearch);

        Renew.setBackground(new java.awt.Color(255, 255, 255));
        Renew.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N

        Expire.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        Expire.setText("jLabel8");

        renewMembership.setFont(new java.awt.Font("Calibri Light", 0, 18)); // NOI18N
        renewMembership.setText("Re-new membership");
        renewMembership.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                renewMembershipMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout RenewLayout = new javax.swing.GroupLayout(Renew);
        Renew.setLayout(RenewLayout);
        RenewLayout.setHorizontalGroup(
            RenewLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(RenewLayout.createSequentialGroup()
                .addGap(291, 291, 291)
                .addComponent(renewMembership, javax.swing.GroupLayout.PREFERRED_SIZE, 329, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, RenewLayout.createSequentialGroup()
                .addContainerGap(86, Short.MAX_VALUE)
                .addComponent(Expire, javax.swing.GroupLayout.PREFERRED_SIZE, 811, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(78, 78, 78))
        );
        RenewLayout.setVerticalGroup(
            RenewLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(RenewLayout.createSequentialGroup()
                .addGap(73, 73, 73)
                .addComponent(Expire, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(76, 76, 76)
                .addComponent(renewMembership)
                .addContainerGap(375, Short.MAX_VALUE))
        );

        panel.addTab("Renew Membership", Renew);

        close.setFont(new java.awt.Font("Arial Black", 0, 18)); // NOI18N
        close.setForeground(new java.awt.Color(255, 255, 255));
        close.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        close.setText("X");
        close.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        close.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                closeMouseClicked(evt);
            }
        });

        Mini.setFont(new java.awt.Font("Arial Black", 0, 36)); // NOI18N
        Mini.setForeground(new java.awt.Color(255, 255, 255));
        Mini.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        Mini.setText("-");
        Mini.setToolTipText("");
        Mini.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        Mini.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                MiniMouseClicked(evt);
            }
        });

        logOut.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        logOut.setForeground(new java.awt.Color(255, 255, 255));
        logOut.setText("LogOut");
        logOut.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        logOut.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                logOutMouseClicked(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(347, 347, 347)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 203, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(logOut)
                .addGap(18, 18, 18)
                .addComponent(Mini, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(close, javax.swing.GroupLayout.PREFERRED_SIZE, 19, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(25, 25, 25))
            .addComponent(panel)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(Mini, javax.swing.GroupLayout.PREFERRED_SIZE, 28, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(logOut))
                        .addGap(15, 15, 15))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 44, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(close, javax.swing.GroupLayout.PREFERRED_SIZE, 29, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(232, 232, 232))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 640, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened
        
        // Form load code:
        // To access the uid variable from another class; first, declare it outside the methods but inside the main class. and inside this class I write import static library.Login.uid;
        // this means I want to import static variable and I must define the full path to it packageName.className.variableName.
            
          //String userID = Integer.toString(uid);  // This code to convert int to string.
         // panel.setEnabledAt(2, false);   // used to disable tabs in the tabbed panel based on the tab index
            
         saveUName.setVisible(false);
         saveFullName.setVisible(false);
         saveAdd.setVisible(false);
         savePhone.setVisible(false);
         saveEmail.setVisible(false);
         
        try 
         {
            MyConnection conn =new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            // User profile tab
            // The following query will fetch only one row of 2 tables:
            ResultSet rs = st.executeQuery("select login.UserName, userInfo.* from login inner join userInfo where login.UID = userInfo.UID and login.UID = " + uid);
            rs.next();
            // The following codes are to set one value from one column and put it in separate textBox
            welcome.setText("Wlcome " + rs.getString("userName"));
            UserName.setText(rs.getString("userName"));
            fullName.setText(rs.getString("fullName"));
            localAdd.setText(rs.getString("localAdd"));
            phoneNo.setText(rs.getString("phoneNo"));
            Email.setText(rs.getString("Email"));
            
//==============================================================================
            // Book search tab
            ResultSet rs1 = st.executeQuery("select * from bookCatigory");
            while(rs1.next())
            {
             catigory.addItem(rs1.getString("CatName"));
            }
//==============================================================================
            // Show expiration date of membership
            ResultSet rs2 = st.executeQuery("Select * from membership where UID = " + uid);
            rs2.next();
            String expireDate = rs2.getString("EndDate");
            Expire.setText("Your membership expires at " + expireDate);
            
            st.close();
            conn.con.close();
            
         }
        
        
        catch (SQLException ex) 
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        } 
        catch (ClassNotFoundException ex) 
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
       
    }//GEN-LAST:event_formWindowOpened

    
    
    private void closeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_closeMouseClicked
        
        // To close the form X label:
        setVisible(false); 
        dispose();
        System.exit(0);
    }//GEN-LAST:event_closeMouseClicked

    
    
    private void MiniMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_MiniMouseClicked
       
        // To minimize the form window:
        this.setState(this.ICONIFIED);  
    }//GEN-LAST:event_MiniMouseClicked

    
    
    private void borrowBooksMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_borrowBooksMouseClicked
        // To borrow selected books - means just update the books status to borrowed
        
        int [] bookid = new int[bookTable.getSelectedRowCount()]; //getSelectedRowCount() gives the number of selected row not the index. count refere to the number of rows.
        int [] rowsIndex = bookTable.getSelectedRows(); // this method will get the index of all selected rows at once, so I saved them as elements in array. 
                                                        // it is different from getSelectedRow which gives only one index of one selected row.
        
        /*for(int i = 0; i < bookTable.getSelectedRowCount(); i++)
        {
         int BookID = (int)bookTable.getValueAt(rowsIndex[i], 0);
         jLabel10.setText(Integer.toString(BookID));
         bookid[i]= BookID;
         System.out.println(bookid[i]);
        }
       */
       try
        {
          MyConnection conn =new MyConnection();
          conn.connect();
          Statement st = conn.con.createStatement();
          ResultSet rs;
          
          String bookStatus, bookName1;
          int count=0;
          
          for(int i = 0; i < bookTable.getSelectedRowCount(); i++)
          {
            int BookID = (int)bookTable.getValueAt(rowsIndex[i], 0);
           // if I want to compare with book status from dataBase I use the rs as following.
           //rs= st.executeQuery("select bookStatus from books where bookID = " + BookID);
           //rs.next();
           
           // However comparing with the book status from table is faster, cause comparison will happen locally no need to connect to DB server, and it is mirroring the values in DB.
              bookName1 = bookTable.getValueAt(rowsIndex[i],1).toString();
              bookStatus = bookTable.getValueAt(rowsIndex[i], 4).toString();
              
              if(bookStatus.equals("Borrowed"))
              {
                JOptionPane.showMessageDialog(null, "This book " + bookName1 + " already borrowed. Please choose another one");   // negative point of this code that the error message will appear several times according the number of borrowed books I must find another way to do it.
              }
             else
              {
                st.executeUpdate("Update books set bookStatus = 'Borrowed' where bookID = " + BookID);  
                count++;
              } 
            }
            
            if(count > 0)
            {
              JOptionPane.showMessageDialog(null, "You have borrowed " + count + " book/s sucessfully");
            }
          
            ResultSet rs1 = st.executeQuery("select bookID as 'Number', bookName as 'Book name', author as 'Author', edition as 'Edition', bookStatus as 'Availability' from books inner join bookCatigory where books.CatID = bookCatigory.CatID and (CatName = '" + catigory.getSelectedItem().toString() + "' and bookName like '" + bookName.getText() + "%')");
            bookTable.setModel(DbUtils.resultSetToTableModel(rs1));
            
            
            st.close();
            conn.con.close();
            

        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
      
         
       

    }//GEN-LAST:event_borrowBooksMouseClicked

    
    
    private void bSearchMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bSearchMouseClicked
        // Book Search code
        try
        {
            MyConnection conn =new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            // User profile tab
            // The following query will fetch only one row of 2 tables:
            ResultSet rs = st.executeQuery("select bookID as 'Book number', bookName as 'Book name', author as 'Author', edition as 'Edition', bookStatus as 'Availability' from books inner join bookCatigory where books.CatID = bookCatigory.CatID and (CatName = '" + catigory.getSelectedItem().toString() + "' and bookName like '" + bookName.getText() + "%')");
            bookTable.setModel(DbUtils.resultSetToTableModel(rs));

            //anylabel.setText(catigory.getSelectedItem().toString());
            st.close();
            conn.con.close();

        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }

    }//GEN-LAST:event_bSearchMouseClicked

    
    
    private void saveAddMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_saveAddMouseClicked
        // To save new local address
        try
        {
            MyConnection conn = new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            st.executeUpdate("update userInfo set localAdd = '" + localAdd.getText() + "' where UID = " + uid);

            st.close();
            conn.con.close();

            localAdd.setEnabled(false);   // To enable the disabled textBoxes
            localAdd.getCaret().setVisible(false);
            saveAdd.setVisible(false);
            editAdd.setVisible(true);
        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        
       JOptionPane.showMessageDialog(null, "sucessfull");
        
    }//GEN-LAST:event_saveAddMouseClicked

    
    
    private void editAddMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editAddMouseClicked
        // To enable local address textArea and show save label
        localAdd.setEditable(true);
        localAdd.getCaret().setVisible(true);
        saveAdd.setVisible(true);
        editAdd.setVisible(false);
    }//GEN-LAST:event_editAddMouseClicked

    
    
    private void saveEmailMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_saveEmailMouseClicked
        // To save new Email
        try
        {
            MyConnection conn = new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            st.executeUpdate("update userInfo set Email = '" + Email.getText() + "' where UID = " + uid);

            st.close();
            conn.con.close();

            Email.setEnabled(false);   // To enable the disabled textBoxes
            Email.getCaret().setVisible(false);
            saveEmail.setVisible(false);
            editEmail.setVisible(true);
        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        JOptionPane.showMessageDialog(null, "sucessfull");
    }//GEN-LAST:event_saveEmailMouseClicked

    
    
    private void editEmailMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editEmailMouseClicked
        // To enable Email textBox and show save label
        Email.setEnabled(true);
        Email.getCaret().setVisible(true);
        saveEmail.setVisible(true);
        editEmail.setVisible(false);
    }//GEN-LAST:event_editEmailMouseClicked

    
    
    private void savePhoneMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_savePhoneMouseClicked
        // To save new phone no.
        try
        {
            MyConnection conn = new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            st.executeUpdate("update userInfo set phoneNo = '" + phoneNo.getText() + "' where UID = " + uid);

            st.close();
            conn.con.close();

            phoneNo.setEnabled(false);   // To enable the disabled textBoxes
            phoneNo.getCaret().setVisible(false);
            savePhone.setVisible(false);
            editPhone.setVisible(true);
        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        JOptionPane.showMessageDialog(null, "sucessfull");
    }//GEN-LAST:event_savePhoneMouseClicked

    
    
    private void editPhoneMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editPhoneMouseClicked
        // To enable phone no. textBox and show save label
        phoneNo.setEnabled(true);
        phoneNo.getCaret().setVisible(true);
        savePhone.setVisible(true);
        editPhone.setVisible(false);
    }//GEN-LAST:event_editPhoneMouseClicked

    
    
    private void saveFullNameMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_saveFullNameMouseClicked
        // To save new full name
        try
        {
            MyConnection conn = new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            st.executeUpdate("update userInfo set fullName = '" + fullName.getText() + "' where UID = " + uid);

            st.close();
            conn.con.close();

            fullName.setEnabled(false);   // To enable the disabled textBoxes
            fullName.getCaret().setVisible(false);
            saveFullName.setVisible(false);
            editFullName.setVisible(true);
        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        JOptionPane.showMessageDialog(null, "sucessfull");
    }//GEN-LAST:event_saveFullNameMouseClicked

    
    
    private void editFullNameMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editFullNameMouseClicked
        // To enable full name textBox and show save label
        fullName.setEnabled(true);
        fullName.getCaret().setVisible(true);
        saveFullName.setVisible(true);
        editFullName.setVisible(false);
    }//GEN-LAST:event_editFullNameMouseClicked

    
    
    private void saveUNameMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_saveUNameMouseClicked
        // To save new user name
        try
        {
            MyConnection conn = new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            st.executeUpdate("update login set UserName = '" + UserName.getText() + "' where UID = " + uid);

            st.close();
            conn.con.close();

            UserName.setEnabled(false);   // To enable the disabled textBoxes
            UserName.getCaret().setVisible(false);
            saveUName.setVisible(false);
            editUName.setVisible(true);
        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        
        JOptionPane.showMessageDialog(null, "sucessfull");  // Message box
    }//GEN-LAST:event_saveUNameMouseClicked

    
    
    private void editUNameMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_editUNameMouseClicked
        // To enable user name textBox and show save label:
        UserName.setEnabled(true);   // To enable the disabled textBoxes
        UserName.getCaret().setVisible(true);  // This show the insert caret on the textBox
        saveUName.setVisible(true);
        editUName.setVisible(false);
    }//GEN-LAST:event_editUNameMouseClicked

    
    
    private void ChangePwdMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ChangePwdMouseClicked
        // To open change password form:
        ChangePwd pwd=new ChangePwd();
        pwd.setVisible(true);
        this.setVisible(false);
    }//GEN-LAST:event_ChangePwdMouseClicked

    
    
    private void bookTableMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_bookTableMouseClicked
        // To prevent the user from accessing the editing mode of the table

        if(bookTable.isEditing())
            {
               JOptionPane.showMessageDialog(null, "the cell is active in the editing mode. Please click anywhere in the table to set the new value in the cell!"); 
            }
    }//GEN-LAST:event_bookTableMouseClicked

    
    
    private void renewMembershipMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_renewMembershipMouseClicked
        // To Renew membership:
       
        try
        {
            MyConnection conn =new MyConnection();
            conn.connect();
            Statement st = conn.con.createStatement();
            
            SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/YYYY");
            // a. The current date
            Date today = new Date();
            String Start = sdf.format(today);
            
            // b.The end date we obtain it by adding number of days to the current date using calendar class
            Calendar cal = Calendar.getInstance();
            cal.setTime(today);
            cal.add(Calendar.DATE, 365);  //Calendar.DATE is the date of month already specified in the calendar
            Date NextDate = cal.getTime();
            String expireDate2 = sdf.format(NextDate);
            
            st.executeUpdate("update membership set endDate = '" + expireDate2 + "' where UID = " + uid);
            Expire.setText("Your membership new expires date is " + expireDate2);
            
            
            /* ResultSet rs = st.executeQuery("Select * from membership where UID = " + uid);
            rs.next();
            String expireDate = rs.getString("EndDate");  //This expiration date will be the date that I will add 365 days to, to extend the membership period.
            // I need to convert this string to date because cal.setTime accept only date object
           
            // to convert string to date object
            SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/YYYY");
                        
            Calendar cal = Calendar.getInstance(); 
            cal.setTime(sdf.parse(expireDate));             
            cal.add(Calendar.DATE, 365);
            Date NextDate = cal.getTime();
            
            // To convert date object into string
            String expireDate2 = sdf.format(NextDate);
            Expire.setText("Your membership new expire Date is " + expireDate2);
            */
            


          
            

            
            st.close();
            conn.con.close();

        }

        catch (SQLException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        }
        catch (ClassNotFoundException ex)
        {
            Logger.getLogger(Members.class.getName()).log(Level.SEVERE, null, ex);
        } 
              
    }//GEN-LAST:event_renewMembershipMouseClicked

    private void logOutMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_logOutMouseClicked
        // To Log out
        uid = 0;
        this.setVisible(false);
        Login log =new Login();
        log.setVisible(true);
    }//GEN-LAST:event_logOutMouseClicked

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Members.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Members.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Members.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Members.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new Members().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel ChangePwd;
    private javax.swing.JTextField Email;
    private javax.swing.JLabel Expire;
    private javax.swing.JLabel Mini;
    private javax.swing.JPanel Renew;
    private javax.swing.JTextField UserName;
    private javax.swing.JButton bSearch;
    private javax.swing.JTextField bookName;
    private javax.swing.JPanel bookSearch;
    private javax.swing.JTable bookTable;
    private javax.swing.JButton borrowBooks;
    private javax.swing.JComboBox<String> catigory;
    private javax.swing.JLabel close;
    private javax.swing.JLabel editAdd;
    private javax.swing.JLabel editEmail;
    private javax.swing.JLabel editFullName;
    private javax.swing.JLabel editPhone;
    private javax.swing.JLabel editUName;
    private javax.swing.JTextField fullName;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea localAdd;
    private javax.swing.JLabel logOut;
    private javax.swing.JTabbedPane panel;
    private javax.swing.JTextField phoneNo;
    private javax.swing.JPanel profile;
    private javax.swing.JButton renewMembership;
    private javax.swing.JLabel saveAdd;
    private javax.swing.JLabel saveEmail;
    private javax.swing.JLabel saveFullName;
    private javax.swing.JLabel savePhone;
    private javax.swing.JLabel saveUName;
    private javax.swing.JLabel welcome;
    // End of variables declaration//GEN-END:variables
}
